local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local AdminModule = loadstring(game:HttpGet("https://raw.githubusercontent.com/EasyDestroyer/EasyDestroyerCodes/main/File2"))()  -- Adjust the path as needed

local activeKillLoops = {}

local function executeHumanoidDamage(humanoid)
    local args = {
        [1] = humanoid,
        [2] = "inf"
    }
    ReplicatedStorage.Remotes.DamageHumanoid:FireServer(unpack(args))
end

local function setupChatListener(plr)
    plr.Chatted:Connect(function(msg)
        local FirstWord, User = msg:match("^(;kill)%s*(.+)$")
    
        if FirstWord and User and AdminModule.isAdmin(plr) then
            local targetPlayer = Players:FindFirstChild(User:match("^%s*(.-)%s*$"))  -- Trims any extra spaces from the username
            if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
                executeHumanoidDamage(targetPlayer.Character.Humanoid)
            end
        end
    end)
end

for _, player in pairs(Players:GetPlayers()) do
    setupChatListener(player)
end

Players.PlayerAdded:Connect(function(player)
    setupChatListener(player)
end)
